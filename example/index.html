<html>

<body>
    <style>
        #outgoing {
            width: 600px;
            word-wrap: break-word;
            white-space: normal;
        }
    </style>
    <form>
        <textarea id="incoming"></textarea>
        <div id="trip"></div>
    </form>
    <pre id="outgoing"></pre>
    <script src="../dist/realtime.js"></script>
    <script>
        const realtime = new window.Realtime((data) => {
            const r = new Float32Array(data.buffer)
            trip.textContent = `${r[0]} ${r[1]} ${r[2]} ${r[3]}`
        });

        realtime.connect();

        const trip = document.getElementById('trip');
        const ta = document.getElementById('incoming');
        const tm = new Map();

        ta.addEventListener('input', function (e) {
            // const t = e.target.value;
            // console.time(t);
            // tm.set(t, new Date())
            // realtime.send(e.target.value);


        });

        let i = 5;

        setInterval(() => {
            realtime.send(new Float32Array([i, i - 1, i - 2, i - 3]));
            i++;

        }, 1000)
    </script>
</body>

</html>